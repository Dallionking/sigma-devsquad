
@layer utilities {
  /* Fluid Typography System using CSS clamp() */
  
  /* Core heading sizes with fluid scaling */
  .text-fluid-xs {
    font-size: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);
    line-height: clamp(1rem, 0.9rem + 0.5vw, 1.25rem);
  }

  .text-fluid-sm {
    font-size: clamp(0.875rem, 0.8rem + 0.375vw, 1rem);
    line-height: clamp(1.25rem, 1.1rem + 0.75vw, 1.5rem);
  }

  .text-fluid-base {
    font-size: clamp(1rem, 0.9rem + 0.5vw, 1.125rem);
    line-height: clamp(1.5rem, 1.3rem + 1vw, 1.75rem);
  }

  .text-fluid-lg {
    font-size: clamp(1.125rem, 1rem + 0.625vw, 1.25rem);
    line-height: clamp(1.75rem, 1.5rem + 1.25vw, 2rem);
  }

  .text-fluid-xl {
    font-size: clamp(1.25rem, 1.1rem + 0.75vw, 1.5rem);
    line-height: clamp(1.75rem, 1.5rem + 1.25vw, 2.25rem);
  }

  .text-fluid-2xl {
    font-size: clamp(1.5rem, 1.3rem + 1vw, 2rem);
    line-height: clamp(2rem, 1.7rem + 1.5vw, 2.5rem);
  }

  .text-fluid-3xl {
    font-size: clamp(1.875rem, 1.5rem + 1.875vw, 2.5rem);
    line-height: clamp(2.25rem, 1.8rem + 2.25vw, 3rem);
  }

  .text-fluid-4xl {
    font-size: clamp(2.25rem, 1.8rem + 2.25vw, 3rem);
    line-height: clamp(2.5rem, 2rem + 2.5vw, 3.5rem);
  }

  .text-fluid-5xl {
    font-size: clamp(3rem, 2.4rem + 3vw, 4rem);
    line-height: clamp(3.5rem, 2.8rem + 3.5vw, 4.5rem);
  }

  .text-fluid-6xl {
    font-size: clamp(3.75rem, 3rem + 3.75vw, 5rem);
    line-height: clamp(4rem, 3.2rem + 4vw, 5.5rem);
  }

  /* Contextual typography for specific use cases */
  .text-fluid-hero {
    font-size: clamp(2.5rem, 2rem + 2.5vw, 4rem);
    line-height: clamp(1.1, 1 + 0.1vw, 1.2);
    font-weight: 700;
    letter-spacing: clamp(-0.025em, -0.02em + -0.005vw, -0.02em);
  }

  .text-fluid-subtitle {
    font-size: clamp(1.125rem, 1rem + 0.625vw, 1.5rem);
    line-height: clamp(1.4, 1.3 + 0.1vw, 1.6);
    font-weight: 400;
  }

  .text-fluid-body {
    font-size: clamp(0.875rem, 0.8rem + 0.375vw, 1.125rem);
    line-height: clamp(1.5, 1.4 + 0.1vw, 1.7);
    font-weight: 400;
  }

  .text-fluid-caption {
    font-size: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);
    line-height: clamp(1.3, 1.2 + 0.1vw, 1.5);
    font-weight: 400;
  }

  /* Fluid spacing utilities */
  .space-fluid-xs {
    margin: clamp(0.25rem, 0.2rem + 0.25vw, 0.5rem);
  }

  .space-fluid-sm {
    margin: clamp(0.5rem, 0.4rem + 0.5vw, 0.75rem);
  }

  .space-fluid-md {
    margin: clamp(0.75rem, 0.6rem + 0.75vw, 1rem);
  }

  .space-fluid-lg {
    margin: clamp(1rem, 0.8rem + 1vw, 1.5rem);
  }

  .space-fluid-xl {
    margin: clamp(1.5rem, 1.2rem + 1.5vw, 2rem);
  }

  .space-fluid-2xl {
    margin: clamp(2rem, 1.6rem + 2vw, 3rem);
  }

  /* Fluid padding utilities */
  .p-fluid-xs {
    padding: clamp(0.25rem, 0.2rem + 0.25vw, 0.5rem);
  }

  .p-fluid-sm {
    padding: clamp(0.5rem, 0.4rem + 0.5vw, 0.75rem);
  }

  .p-fluid-md {
    padding: clamp(0.75rem, 0.6rem + 0.75vw, 1rem);
  }

  .p-fluid-lg {
    padding: clamp(1rem, 0.8rem + 1vw, 1.5rem);
  }

  .p-fluid-xl {
    padding: clamp(1.5rem, 1.2rem + 1.5vw, 2rem);
  }

  .p-fluid-2xl {
    padding: clamp(2rem, 1.6rem + 2vw, 3rem);
  }

  /* Fluid gap utilities for flexbox and grid */
  .gap-fluid-xs {
    gap: clamp(0.25rem, 0.2rem + 0.25vw, 0.5rem);
  }

  .gap-fluid-sm {
    gap: clamp(0.5rem, 0.4rem + 0.5vw, 0.75rem);
  }

  .gap-fluid-md {
    gap: clamp(0.75rem, 0.6rem + 0.75vw, 1rem);
  }

  .gap-fluid-lg {
    gap: clamp(1rem, 0.8rem + 1vw, 1.5rem);
  }

  .gap-fluid-xl {
    gap: clamp(1.5rem, 1.2rem + 1.5vw, 2rem);
  }

  .gap-fluid-2xl {
    gap: clamp(2rem, 1.6rem + 2vw, 3rem);
  }

  /* Accessibility considerations */
  @media (prefers-reduced-motion: reduce) {
    .text-fluid-hero,
    .text-fluid-subtitle,
    .text-fluid-body,
    .text-fluid-caption {
      transition: none;
    }
  }

  /* High contrast mode adjustments */
  @media (prefers-contrast: high) {
    .text-fluid-hero,
    .text-fluid-subtitle,
    .text-fluid-body,
    .text-fluid-caption {
      letter-spacing: 0.05em;
    }
  }

  /* Dark mode optimizations */
  @media (prefers-color-scheme: dark) {
    .text-fluid-hero,
    .text-fluid-subtitle,
    .text-fluid-body,
    .text-fluid-caption {
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    }
  }
}
