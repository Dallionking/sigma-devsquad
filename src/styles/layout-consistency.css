
@layer utilities {
  /* Standardized spacing system using relative units */
  .spacing-xs { padding: 0.25rem; margin: 0.25rem; }
  .spacing-sm { padding: 0.5rem; margin: 0.5rem; }
  .spacing-md { padding: 1rem; margin: 1rem; }
  .spacing-lg { padding: 1.5rem; margin: 1.5rem; }
  .spacing-xl { padding: 2rem; margin: 2rem; }
  .spacing-2xl { padding: 3rem; margin: 3rem; }

  /* Consistent padding system */
  .p-consistent-xs { padding: 0.25rem; }
  .p-consistent-sm { padding: 0.5rem; }
  .p-consistent-md { padding: 1rem; }
  .p-consistent-lg { padding: 1.5rem; }
  .p-consistent-xl { padding: 2rem; }

  .px-consistent-xs { padding-left: 0.25rem; padding-right: 0.25rem; }
  .px-consistent-sm { padding-left: 0.5rem; padding-right: 0.5rem; }
  .px-consistent-md { padding-left: 1rem; padding-right: 1rem; }
  .px-consistent-lg { padding-left: 1.5rem; padding-right: 1.5rem; }
  .px-consistent-xl { padding-left: 2rem; padding-right: 2rem; }

  .py-consistent-xs { padding-top: 0.25rem; padding-bottom: 0.25rem; }
  .py-consistent-sm { padding-top: 0.5rem; padding-bottom: 0.5rem; }
  .py-consistent-md { padding-top: 1rem; padding-bottom: 1rem; }
  .py-consistent-lg { padding-top: 1.5rem; padding-bottom: 1.5rem; }
  .py-consistent-xl { padding-top: 2rem; padding-bottom: 2rem; }

  /* Consistent margin system */
  .m-consistent-xs { margin: 0.25rem; }
  .m-consistent-sm { margin: 0.5rem; }
  .m-consistent-md { margin: 1rem; }
  .m-consistent-lg { margin: 1.5rem; }
  .m-consistent-xl { margin: 2rem; }

  .mx-consistent-xs { margin-left: 0.25rem; margin-right: 0.25rem; }
  .mx-consistent-sm { margin-left: 0.5rem; margin-right: 0.5rem; }
  .mx-consistent-md { margin-left: 1rem; margin-right: 1rem; }
  .mx-consistent-lg { margin-left: 1.5rem; margin-right: 1.5rem; }
  .mx-consistent-xl { margin-left: 2rem; margin-right: 2rem; }

  .my-consistent-xs { margin-top: 0.25rem; margin-bottom: 0.25rem; }
  .my-consistent-sm { margin-top: 0.5rem; margin-bottom: 0.5rem; }
  .my-consistent-md { margin-top: 1rem; margin-bottom: 1rem; }
  .my-consistent-lg { margin-top: 1.5rem; margin-bottom: 1.5rem; }
  .my-consistent-xl { margin-top: 2rem; margin-bottom: 2rem; }

  /* Consistent gap system */
  .gap-consistent-xs { gap: 0.25rem; }
  .gap-consistent-sm { gap: 0.5rem; }
  .gap-consistent-md { gap: 1rem; }
  .gap-consistent-lg { gap: 1.5rem; }
  .gap-consistent-xl { gap: 2rem; }

  /* Visual hierarchy system with relative units */
  .heading-primary {
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: 1rem;
  }

  .heading-secondary {
    font-size: clamp(1.25rem, 3.5vw, 2rem);
    font-weight: 600;
    line-height: 1.3;
    margin-bottom: 0.75rem;
  }

  .heading-tertiary {
    font-size: clamp(1.125rem, 3vw, 1.75rem);
    font-weight: 500;
    line-height: 1.4;
    margin-bottom: 0.5rem;
  }

  .body-large {
    font-size: clamp(1rem, 2.5vw, 1.25rem);
    line-height: 1.6;
    margin-bottom: 1rem;
  }

  .body-regular {
    font-size: clamp(0.875rem, 2vw, 1rem);
    line-height: 1.5;
    margin-bottom: 0.75rem;
  }

  .body-small {
    font-size: clamp(0.75rem, 1.5vw, 0.875rem);
    line-height: 1.4;
    margin-bottom: 0.5rem;
  }

  .caption {
    font-size: clamp(0.625rem, 1.25vw, 0.75rem);
    line-height: 1.3;
    margin-bottom: 0.25rem;
  }

  /* Critical function accessibility */
  .critical-action {
    min-height: 2.75rem; /* 44px equivalent */
    min-width: 2.75rem;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    border-radius: 0.5rem;
    cursor: pointer;
    touch-action: manipulation;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .critical-action:focus-visible {
    outline: 0.125rem solid hsl(var(--primary));
    outline-offset: 0.125rem;
  }

  /* Consistent container widths using relative units */
  .container-xs { max-width: 20rem; margin: 0 auto; }
  .container-sm { max-width: 24rem; margin: 0 auto; }
  .container-md { max-width: 42rem; margin: 0 auto; }
  .container-lg { max-width: 64rem; margin: 0 auto; }
  .container-xl { max-width: 80rem; margin: 0 auto; }
  .container-2xl { max-width: 96rem; margin: 0 auto; }

  /* Responsive container system */
  .container-responsive {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-left: clamp(1rem, 5vw, 2rem);
    padding-right: clamp(1rem, 5vw, 2rem);
  }

  @media (min-width: 640px) {
    .container-responsive { max-width: 640px; }
  }

  @media (min-width: 768px) {
    .container-responsive { max-width: 768px; }
  }

  @media (min-width: 1024px) {
    .container-responsive { max-width: 1024px; }
  }

  @media (min-width: 1280px) {
    .container-responsive { max-width: 1280px; }
  }

  @media (min-width: 1536px) {
    .container-responsive { max-width: 1536px; }
  }

  /* Consistent border radius using relative units */
  .radius-xs { border-radius: 0.125rem; }
  .radius-sm { border-radius: 0.25rem; }
  .radius-md { border-radius: 0.375rem; }
  .radius-lg { border-radius: 0.5rem; }
  .radius-xl { border-radius: 0.75rem; }
  .radius-2xl { border-radius: 1rem; }

  /* Consistent elevation system */
  .elevation-xs {
    box-shadow: 0 0.0625rem 0.125rem rgba(0, 0, 0, 0.05);
  }

  .elevation-sm {
    box-shadow: 0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.1), 
                0 0.0625rem 0.125rem rgba(0, 0, 0, 0.06);
  }

  .elevation-md {
    box-shadow: 0 0.25rem 0.375rem -0.0625rem rgba(0, 0, 0, 0.1), 
                0 0.125rem 0.25rem -0.0625rem rgba(0, 0, 0, 0.06);
  }

  .elevation-lg {
    box-shadow: 0 0.625rem 0.9375rem -0.1875rem rgba(0, 0, 0, 0.1), 
                0 0.25rem 0.375rem -0.125rem rgba(0, 0, 0, 0.06);
  }

  .elevation-xl {
    box-shadow: 0 1.25rem 1.5625rem -0.3125rem rgba(0, 0, 0, 0.1), 
                0 0.5rem 0.625rem -0.25rem rgba(0, 0, 0, 0.06);
  }

  /* Accessible color contrast */
  .text-contrast-high {
    color: hsl(var(--foreground));
    contrast: high;
  }

  .text-contrast-medium {
    color: hsl(var(--muted-foreground));
    opacity: 0.8;
  }

  .text-contrast-low {
    color: hsl(var(--muted-foreground));
    opacity: 0.6;
  }

  /* Layout grid system with relative units */
  .grid-consistent {
    display: grid;
    gap: clamp(1rem, 3vw, 2rem);
  }

  .grid-auto-fit-xs {
    grid-template-columns: repeat(auto-fit, minmax(12.5rem, 1fr));
  }

  .grid-auto-fit-sm {
    grid-template-columns: repeat(auto-fit, minmax(15.625rem, 1fr));
  }

  .grid-auto-fit-md {
    grid-template-columns: repeat(auto-fit, minmax(18.75rem, 1fr));
  }

  .grid-auto-fit-lg {
    grid-template-columns: repeat(auto-fit, minmax(21.875rem, 1fr));
  }

  /* Flex utilities with consistent spacing */
  .flex-consistent {
    display: flex;
    gap: clamp(0.5rem, 2vw, 1rem);
  }

  .flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .flex-between {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .flex-start {
    display: flex;
    align-items: center;
    justify-content: flex-start;
  }

  .flex-end {
    display: flex;
    align-items: center;
    justify-content: flex-end;
  }
}

/* Breakpoint-specific consistency overrides */
@media (max-width: 767px) {
  .mobile-spacing-override {
    padding: clamp(0.5rem, 4vw, 1rem);
    margin: clamp(0.25rem, 2vw, 0.5rem);
  }

  .mobile-critical-action {
    min-height: 3rem; /* Larger touch targets on mobile */
    min-width: 3rem;
    padding: 1rem 1.25rem;
  }
}

@media (min-width: 768px) and (max-width: 1023px) {
  .tablet-spacing-override {
    padding: clamp(0.75rem, 3vw, 1.5rem);
    margin: clamp(0.5rem, 2vw, 1rem);
  }
}

@media (min-width: 1024px) {
  .desktop-spacing-override {
    padding: clamp(1rem, 2vw, 2rem);
    margin: clamp(0.75rem, 1.5vw, 1.5rem);
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .consistent-high-contrast {
    border-width: 0.125rem;
    border-style: solid;
    border-color: currentColor;
  }

  .critical-action {
    border-width: 0.125rem;
    border-style: solid;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .consistent-motion-safe {
    transition: none !important;
    animation: none !important;
  }
}
