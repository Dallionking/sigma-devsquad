
@layer utilities {
  /* Consistent spacing scale - Using rem units for scalability */
  .space-unit-1 { --space: 0.25rem; } /* 4px */
  .space-unit-2 { --space: 0.5rem; }  /* 8px */
  .space-unit-3 { --space: 0.75rem; } /* 12px */
  .space-unit-4 { --space: 1rem; }    /* 16px */
  .space-unit-5 { --space: 1.25rem; } /* 20px */
  .space-unit-6 { --space: 1.5rem; }  /* 24px */
  .space-unit-8 { --space: 2rem; }    /* 32px */
  .space-unit-10 { --space: 2.5rem; } /* 40px */
  .space-unit-12 { --space: 3rem; }   /* 48px */
  .space-unit-16 { --space: 4rem; }   /* 64px */
  .space-unit-20 { --space: 5rem; }   /* 80px */

  /* Consistent container padding */
  .container-padding-xs {
    padding-left: var(--space-unit-3, 0.75rem);
    padding-right: var(--space-unit-3, 0.75rem);
  }

  .container-padding-sm {
    padding-left: var(--space-unit-4, 1rem);
    padding-right: var(--space-unit-4, 1rem);
  }

  .container-padding-md {
    padding-left: var(--space-unit-6, 1.5rem);
    padding-right: var(--space-unit-6, 1.5rem);
  }

  .container-padding-lg {
    padding-left: var(--space-unit-8, 2rem);
    padding-right: var(--space-unit-8, 2rem);
  }

  /* Consistent section spacing */
  .section-spacing-xs {
    padding-top: var(--space-unit-4, 1rem);
    padding-bottom: var(--space-unit-4, 1rem);
  }

  .section-spacing-sm {
    padding-top: var(--space-unit-6, 1.5rem);
    padding-bottom: var(--space-unit-6, 1.5rem);
  }

  .section-spacing-md {
    padding-top: var(--space-unit-8, 2rem);
    padding-bottom: var(--space-unit-8, 2rem);
  }

  .section-spacing-lg {
    padding-top: var(--space-unit-12, 3rem);
    padding-bottom: var(--space-unit-12, 3rem);
  }

  /* Consistent card spacing */
  .card-padding-sm {
    padding: var(--space-unit-3, 0.75rem);
  }

  .card-padding-md {
    padding: var(--space-unit-4, 1rem);
  }

  .card-padding-lg {
    padding: var(--space-unit-6, 1.5rem);
  }

  /* Consistent gap spacing */
  .gap-consistent-xs { gap: var(--space-unit-2, 0.5rem); }
  .gap-consistent-sm { gap: var(--space-unit-3, 0.75rem); }
  .gap-consistent-md { gap: var(--space-unit-4, 1rem); }
  .gap-consistent-lg { gap: var(--space-unit-6, 1.5rem); }
  .gap-consistent-xl { gap: var(--space-unit-8, 2rem); }

  /* Layout positioning utilities */
  .layout-no-overlap {
    position: relative;
    z-index: 1;
  }

  .layout-sidebar-offset {
    margin-left: var(--sidebar-width, 0);
    transition: margin-left 300ms ease-in-out;
  }

  .layout-header-offset {
    padding-top: var(--header-height, 4rem);
  }

  /* Responsive breakpoints for consistent spacing */
  @media (max-width: 640px) {
    .container-padding-responsive {
      padding-left: var(--space-unit-4, 1rem);
      padding-right: var(--space-unit-4, 1rem);
    }
    
    .section-spacing-responsive {
      padding-top: var(--space-unit-4, 1rem);
      padding-bottom: var(--space-unit-4, 1rem);
    }
  }

  @media (min-width: 641px) and (max-width: 1024px) {
    .container-padding-responsive {
      padding-left: var(--space-unit-6, 1.5rem);
      padding-right: var(--space-unit-6, 1.5rem);
    }
    
    .section-spacing-responsive {
      padding-top: var(--space-unit-6, 1.5rem);
      padding-bottom: var(--space-unit-6, 1.5rem);
    }
  }

  @media (min-width: 1025px) {
    .container-padding-responsive {
      padding-left: var(--space-unit-8, 2rem);
      padding-right: var(--space-unit-8, 2rem);
    }
    
    .section-spacing-responsive {
      padding-top: var(--space-unit-8, 2rem);
      padding-bottom: var(--space-unit-8, 2rem);
    }
  }

  /* Fix for common overlap issues */
  .prevent-overlap {
    isolation: isolate;
  }

  .content-safe-area {
    padding-left: max(env(safe-area-inset-left), var(--space-unit-4, 1rem));
    padding-right: max(env(safe-area-inset-right), var(--space-unit-4, 1rem));
  }

  /* Consistent touch targets */
  .touch-target-minimum {
    min-height: 44px;
    min-width: 44px;
  }

  .touch-target-comfortable {
    min-height: 48px;
    min-width: 48px;
  }

  /* Layout stability */
  .layout-stable {
    contain: layout style;
    will-change: auto;
  }
}

/* CSS Custom Properties for dynamic spacing */
:root {
  --sidebar-width-collapsed: 4rem;
  --sidebar-width-expanded: 24rem;
  --sidebar-width-team: 20rem;
  --header-height: 4rem;
  --footer-height: 3rem;
}

/* High contrast mode adjustments */
@media (prefers-contrast: high) {
  .layout-separator {
    border-width: 2px;
  }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .layout-sidebar-offset {
    transition: none;
  }
}
