
@layer utilities {
  /* Standardized spacing scale based on 4px base unit */
  .space-4px { @apply space-y-1; }
  .space-8px { @apply space-y-2; }
  .space-12px { @apply space-y-3; }
  .space-16px { @apply space-y-4; }
  .space-20px { @apply space-y-5; }
  .space-24px { @apply space-y-6; }
  .space-32px { @apply space-y-8; }
  .space-48px { @apply space-y-12; }

  /* Consistent container spacing */
  .container-spacing {
    @apply px-4 sm:px-6 lg:px-8 xl:px-12;
  }

  .container-spacing-tight {
    @apply px-2 sm:px-4 lg:px-6;
  }

  .container-spacing-loose {
    @apply px-6 sm:px-8 lg:px-12 xl:px-16;
  }

  /* Consistent section spacing */
  .section-spacing {
    @apply py-6 sm:py-8 lg:py-12;
  }

  .section-spacing-tight {
    @apply py-4 sm:py-6 lg:py-8;
  }

  .section-spacing-loose {
    @apply py-8 sm:py-12 lg:py-16;
  }

  /* Consistent card spacing */
  .card-spacing {
    @apply p-4 sm:p-6;
  }

  .card-spacing-tight {
    @apply p-3 sm:p-4;
  }

  .card-spacing-loose {
    @apply p-6 sm:p-8;
  }

  /* Layout utilities to prevent overlap */
  .layout-sidebar-offset {
    @apply ml-0 md:ml-16 lg:ml-64 transition-all duration-300;
  }

  .layout-sidebar-collapsed-offset {
    @apply ml-0 md:ml-16 transition-all duration-300;
  }

  .layout-content-safe {
    @apply min-h-0 overflow-hidden;
  }

  .layout-full-height {
    @apply min-h-screen;
  }

  /* Z-index scale for preventing overlap */
  .z-sidebar { z-index: 40; }
  .z-header { z-index: 30; }
  .z-modal { z-index: 50; }
  .z-dropdown { z-index: 50; }
  .z-tooltip { z-index: 60; }
  .z-overlay { z-index: 45; }

  /* Touch-friendly spacing */
  .touch-spacing {
    @apply min-h-12 min-w-12 p-3;
  }

  .touch-spacing-sm {
    @apply min-h-10 min-w-10 p-2;
  }

  /* Responsive gap utilities */
  .gap-responsive {
    @apply gap-2 sm:gap-4 lg:gap-6;
  }

  .gap-responsive-tight {
    @apply gap-1 sm:gap-2 lg:gap-3;
  }

  .gap-responsive-loose {
    @apply gap-4 sm:gap-6 lg:gap-8;
  }

  /* Consistent border radius scale */
  .radius-xs { @apply rounded-sm; }
  .radius-sm { @apply rounded; }
  .radius-md { @apply rounded-md; }
  .radius-lg { @apply rounded-lg; }
  .radius-xl { @apply rounded-xl; }

  /* Consistent shadow scale */
  .shadow-consistent-sm { @apply shadow-sm; }
  .shadow-consistent-md { @apply shadow-md; }
  .shadow-consistent-lg { @apply shadow-lg; }
  .shadow-consistent-xl { @apply shadow-xl; }

  /* Flexible grid utilities */
  .grid-consistent-auto {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4;
  }

  .grid-consistent-2 {
    @apply grid grid-cols-1 lg:grid-cols-2;
  }

  .grid-consistent-3 {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3;
  }

  /* Overflow handling */
  .overflow-safe {
    @apply overflow-hidden;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  .scroll-safe {
    @apply overflow-auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
  }
}

/* CSS custom properties for spacing consistency */
:root {
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  --spacing-2xl: 3rem;
  
  --layout-sidebar-width: 16rem;
  --layout-sidebar-collapsed-width: 4rem;
  --layout-header-height: 4rem;
  
  --z-sidebar: 40;
  --z-header: 30;
  --z-modal: 50;
  --z-dropdown: 50;
  --z-tooltip: 60;
}

/* Responsive adjustments for smaller screens */
@media (max-width: 768px) {
  :root {
    --spacing-xs: 0.125rem;
    --spacing-sm: 0.25rem;
    --spacing-md: 0.75rem;
    --spacing-lg: 1rem;
    --spacing-xl: 1.5rem;
    --spacing-2xl: 2rem;
  }
}

/* Ensure proper spacing for specific component combinations */
.sidebar + .main-content {
  margin-left: var(--layout-sidebar-width);
  width: calc(100% - var(--layout-sidebar-width));
  transition: margin-left 0.3s ease, width 0.3s ease;
}

.sidebar.collapsed + .main-content {
  margin-left: var(--layout-sidebar-collapsed-width);
  width: calc(100% - var(--layout-sidebar-collapsed-width));
}

@media (max-width: 768px) {
  .sidebar + .main-content,
  .sidebar.collapsed + .main-content {
    margin-left: 0;
    width: 100%;
  }
}

/* Prevent content jumping during transitions */
.layout-transition {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Focus outline consistency */
.focus-consistent:focus {
  outline: 2px solid hsl(var(--primary));
  outline-offset: 2px;
}
